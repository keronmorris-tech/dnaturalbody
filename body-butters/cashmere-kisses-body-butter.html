<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Cashmere Kisses | D'NATURAL BODY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css">

  <style>
    /* Hide Shopify default controls *inside* the product component */
    #product-component-14889665036653 .shopify-buy__product__variant-selectors,
    #product-component-14889665036653 .shopify-buy__option-select-wrapper,
    #product-component-14889665036653 select.shopify-buy__option-select__select,
    #product-component-14889665036653 .shopify-buy__product__quantity,
    #product-component-14889665036653 .shopify-buy__btn {
      display: none !important;
    }

    /* Visually hide the whole component but keep it in the DOM
       so Shopify's JS still works and our script can use it. */
    #product-component-14889665036653 {
      position: absolute;
      left: -9999px;
      top: auto;
      opacity: 0;
      pointer-events: none;
    }

    /* Purchase block spacing */
    .purchase-block { margin-top: 22px; }
    .purchase-label {
      font-size: 12px;
      letter-spacing: .12em;
      text-transform: uppercase;
      opacity: .7;
      margin-bottom: 8px;
    }

    .size-options {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin: 10px 0 14px;
    }
    .size-pill {
      border: 1px solid #222;
      background: #fff;
      color: #000;
      padding: 10px 16px;
      border-radius: 999px;
      cursor: pointer;
      font-weight: 600;
      font-size: 14px;
    }
    .size-pill.active {
      background: #111;
      color: #fff;
      border-color: #111;
    }

    .variant-price {
      font-size: 18px;
      font-weight: 700;
      margin: 6px 0 10px;
    }

    .qty-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin: 8px 0 14px;
    }
    .qty-btn {
      width: 42px;
      height: 42px;
      border: 1px solid #222;
      background: #fff;
      border-radius: 10px;
      cursor: pointer;
      font-size: 18px;
    }
    .qty-input {
      width: 64px;
      height: 42px;
      border: 1px solid #222;
      border-radius: 10px;
      text-align: center;
      font-weight: 700;
    }

    .btn-primary {
      background: #111;
      color: #fff;
      border: none;
      padding: 14px 18px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 700;
      width: 220px;
    }
    .btn-primary:disabled {
      opacity: .5;
      cursor: not-allowed;
    }
  </style>
</head>

<body class="product-body">
  <header class="header">
    <a href="../index.html" class="logo">
      <img src="../images/logo.png" alt="D'NATURAL BODY Logo">
    </a>

    <nav class="main-nav">
      <a href="../index.html" class="nav-link">Home</a>

      <div class="nav-item dropdown">
        <a href="../shop.html" class="nav-link">Shop ▾</a>
        <div class="dropdown-menu">
          <a href="../shop.html">View All</a>
          <a href="../shop-body-butter.html">Body Butter</a>
          <a href="../shop-body-scrub.html">Body Scrub</a>
          <a href="../shop-body-yogurt.html">Body Yogurt</a>
        </div>
      </div>

      <a href="../about.html" class="nav-link">About</a>
      <a href="../contact.html" class="nav-link">Contact</a>

      <!-- Shopify cart icon + count renders here -->
      <div id="shopify-cart-toggle"></div>
    </nav>
  </header>

  <section class="product-detail">
    <div class="product-detail-inner">

      <div class="product-image">
        <img src="../images/Cashmere-kisses-body-butter.jpg" alt="Cashmere Kisses">
      </div>

      <div class="product-info">
        <h1>Cashmere Kisses</h1>
        <div class="product-type">Body Butter</div>

        <p class="product-desc">
          A soft, cozy blend that feels like your favorite cashmere sweater on the skin — smoothing,
          comforting, and perfect for everyday luxury.
        </p>

        <a href="../shop-body-butter.html" class="outline-btn">Back</a>

        <div class="product-sections">
          <details open>
            <summary>Benefits</summary>
            <p>
              • Cushions dry skin with rich, creamy moisture.<br>
              • Adds a soft, comforting scent that hugs the skin.<br>
              • Helps improve the look and feel of rough areas over time.
            </p>
          </details>

          <details>
            <summary>Ingredients</summary>
            <p>
              59.5% Distilled Water, Glycerin, Jojoba Oil, Shea Butter, Mango Butter, Cocoa Butter,
              Cetyl Alcohol, BTMS-50, Liquid Germall Plus, Fragrance/Essential Oil.
            </p>
          </details>

          <details>
            <summary>How to Use</summary>
            <p>Apply from neck to toes after bathing, or anytime you want that soft-cashmere feel.</p>
          </details>
        </div>

        <!-- PURCHASE BLOCK LAST -->
        <div class="purchase-block">
          <div class="purchase-label">Size</div>
          <div id="size-options" class="size-options"></div>

          <div id="variant-price" class="variant-price">$0.00</div>

          <div class="purchase-label">Quantity</div>
          <div class="qty-row">
            <button class="qty-btn" type="button" id="qty-minus">−</button>
            <input class="qty-input" type="text" id="qty-input" value="1" inputmode="numeric" />
            <button class="qty-btn" type="button" id="qty-plus">+</button>
          </div>

          <button id="add-to-cart" class="btn-primary" type="button" disabled>Add to cart</button>

          <!-- Hidden Shopify product component: DO NOT remove -->
          <div id="product-component-14889665036653"></div>
        </div>

      </div>

    </div>
  </section>

  <footer class="footer">
    <p>© 2026 D'NATURAL BODY</p>
    <p>Email: dnaturalbody@outlook.com</p>
  </footer>

  <!-- Global Shopify cart + toggle wiring (this mounts the hidden product component) -->
  <script src="../buybutton.js"></script>

  <script>
    (function () {
      function clampQty(n) {
        n = Number(n);
        if (isNaN(n) || n < 1) n = 1;
        return Math.floor(n);
      }

      function initPage() {
        var qtyInput = document.getElementById('qty-input');
        var qtyMinus = document.getElementById('qty-minus');
        var qtyPlus  = document.getElementById('qty-plus');
        var pillsWrap = document.getElementById('size-options');
        var priceEl   = document.getElementById('variant-price');
        var addBtn    = document.getElementById('add-to-cart');

        if (!qtyInput || !qtyMinus || !qtyPlus || !pillsWrap || !priceEl || !addBtn) return;

        /* --- local quantity controls --- */
        qtyInput.value = '1';
        qtyMinus.addEventListener('click', function () {
          qtyInput.value = clampQty(qtyInput.value) - 1;
          if (Number(qtyInput.value) < 1) qtyInput.value = 1;
        });
        qtyPlus.addEventListener('click', function () {
          qtyInput.value = clampQty(qtyInput.value) + 1;
        });
        qtyInput.addEventListener('blur', function () {
          qtyInput.value = clampQty(qtyInput.value);
        });

        /* --- wait for Shopify Buy Button to mount --- */
        function waitForShopifyComponent(attempt) {
          attempt = attempt || 0;
          var root = document.getElementById('product-component-14889665036653');
          if (!root) return;

          var hiddenSelect = root.querySelector('select.shopify-buy__option-select__select');
          var hiddenQty    = root.querySelector('input.shopify-buy__quantity-input, input[type="number"]');
          var hiddenBtn    = root.querySelector('.shopify-buy__btn');
          var priceNode    = root.querySelector('.shopify-buy__product__price');

          if (hiddenSelect && hiddenBtn && priceNode) {
            buildUi(root, hiddenSelect, hiddenQty, hiddenBtn, priceNode);
          } else if (attempt < 100) {
            setTimeout(function () { waitForShopifyComponent(attempt + 1); }, 100);
          } else {
            console.error('Shopify product component never became ready');
          }
        }

        function buildUi(root, hiddenSelect, hiddenQty, hiddenBtn, priceNode) {
          var selectedIndex = -1;

          function setActive(btn) {
            var all = pillsWrap.querySelectorAll('.size-pill');
            Array.prototype.forEach.call(all, function (b) {
              b.classList.toggle('active', b === btn);
            });
          }

          // Build pills from hidden select options
          Array.prototype.forEach.call(hiddenSelect.options, function (opt, idx) {
            if (!opt.value) return; // skip placeholder if any

            var label = opt.textContent.trim();
            var btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'size-pill';
            btn.textContent = label;

            btn.addEventListener('click', function () {
              selectedIndex = idx;

              // Sync hidden select
              hiddenSelect.selectedIndex = idx;
              hiddenSelect.dispatchEvent(new Event('change', { bubbles: true }));

              // Update visible price from hidden widget
              if (priceNode && priceNode.textContent) {
                priceEl.textContent = priceNode.textContent.trim();
              }

              // Visual state + enable button
              setActive(btn);
              addBtn.disabled = false;
            });

            pillsWrap.appendChild(btn);

            // Auto-select the first real option
            if (selectedIndex === -1) {
              btn.click();
            }
          });

          // Add to cart uses the hidden Shopify button
          addBtn.addEventListener('click', function () {
            if (selectedIndex === -1) return;

            var qty = clampQty(qtyInput.value || 1);

            if (hiddenQty) {
              hiddenQty.value = qty;
              hiddenQty.dispatchEvent(new Event('change', { bubbles: true }));
            }

            hiddenBtn.click(); // Shopify handles cart + drawer
          });
        }

        waitForShopifyComponent();
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initPage);
      } else {
        initPage();
      }
    })();
  </script>
</body>
</html>
